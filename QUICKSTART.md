# 🎯 クイックスタートガイド

AirPodsを使った話者分離システムをすぐに始めるための簡単なガイドです。

## 📋 事前準備（5分）

### 1. AirPodsの接続

1. AirPodsをMacBookに接続
2. **システム環境設定** > **サウンド** を開く
3. **入力**タブで **AirPods** を選択
4. 入力レベルが動くことを確認

### 2. 環境セットアップ

```bash
# tasksディレクトリに移動
cd /Users/takakurakanta/tasks

# セットアップスクリプトを実行（初回のみ）
./setup.sh

# 仮想環境をアクティベート
source venv/bin/activate
```

## 🧪 動作確認（2分）

### デバイステスト

```bash
# AirPodsが正しく認識されているか確認
python test_devices.py
```

**期待される出力:**
```
=== AirPodsデバイス ===

[X] AirPods Pro
    入力チャンネル数: 2
    出力チャンネル数: 2
```

**簡易録音テスト:**
- プログラムが尋ねたら `y` を入力
- 3秒間、左右から音を出す（手を叩くなど）
- 両チャンネルで音声が検出されればOK ✓

## 🎤 話者分離の実行（3分）

### 基本的な使い方

```bash
# メインプログラムを実行
python beam_forming.py
```

### 設定の入力

1. **録音時間を入力:**
   ```
   録音時間を入力してください（秒）:
   > 10
   ```
   ※ Enterのみで手動停止モード（Ctrl+Cで停止）

2. **ビームフォーミング手法を選択:**
   ```
   1: Delay-and-Sum（遅延和）- 高速・安定
   2: MVDR - 高精度・計算量大
   > 1
   ```
   ※ 初めての場合は `1` を推奨

3. **録音開始**
   - 2人が左右に分かれて話す
   - 進捗が表示される
   - 指定時間後、自動的に停止

4. **可視化（オプション）**
   ```
   結果を可視化しますか？ (y/n)
   > y
   ```

## 📁 出力ファイル

録音が完了すると、以下のファイルが生成されます:

```
speaker1_left_20231225_143000.wav   # 左側の話者
speaker2_right_20231225_143000.wav  # 右側の話者
separation_result_20231225_143000.png  # 可視化結果（オプション）
```

## 💡 使用例

### シナリオ1: 会議の録音（2人）

```bash
# 10分間録音
python beam_forming.py
# 録音時間: 600
# 手法: 1 (Delay-and-Sum)
```

**配置:**
```
    話者A          話者B
      🗣️            🗣️
       \            /
        \          /
         ●────────●
      (あなた + AirPods)
```

### シナリオ2: インタビュー

```bash
# 手動停止モード（質問が終わるまで）
python beam_forming.py
# 録音時間: [Enter]
# 手法: 2 (MVDR - 高精度)
# 終了時: Ctrl+C
```

### シナリオ3: テスト録音

```bash
# 5秒間のテスト
python beam_forming.py
# 録音時間: 5
# 手法: 1
```

## ⚙️ よくある設定

### 話者の角度を変更したい

`beam_forming.py` の47行目付近を編集:

```python
# デフォルト: 左右45度
self.angles = np.array([-45, 45])

# より広い角度（左右60度）
self.angles = np.array([-60, 60])

# 狭い角度（左右30度）
self.angles = np.array([-30, 30])
```

### マイク間距離を調整したい

`beam_forming.py` の `main()` 関数内:

```python
beamformer = AirPodsBeamformer(
    sample_rate=48000,
    block_size=4096,
    mic_distance=0.15  # ← ここを変更（メートル単位）
)
```

## 🔧 トラブルシューティング

### ❌ AirPodsが見つからない

```bash
# 1. デバイステストを実行
python test_devices.py

# 2. システム環境設定でAirPodsを確認
# 3. Bluetoothを再接続
```

### ❌ 音声が分離されない

**チェックリスト:**
- [ ] 2人が左右に十分離れているか（90度以上推奨）
- [ ] 話者とマイクの距離が適切か（1-3m推奨）
- [ ] 静かな環境か（反響が少ない）
- [ ] MVDRアルゴリズムを試したか

**解決策:**
```python
# 角度を調整
self.angles = np.array([-60, 60])  # より広く

# MVDRを使用
# プログラム実行時に "2" を選択
```

### ❌ ノイズが多い

```python
# ブロックサイズを大きくする
beamformer = AirPodsBeamformer(
    block_size=8192  # デフォルト: 4096
)
```

## 📊 結果の確認

### 音声ファイルの再生

```bash
# macOSの標準プレーヤーで再生
open speaker1_left_*.wav
open speaker2_right_*.wav
```

### 可視化結果の確認

```bash
# 画像を開く
open separation_result_*.png
```

**可視化には以下が表示されます:**
1. 話者1の波形
2. 話者2の波形
3. 話者1のスペクトログラム

## 🎓 次のステップ

### さらに詳しく知りたい

- **技術的な詳細**: `TECHNICAL.md` を参照
- **完全なドキュメント**: `README.md` を参照

### パラメータの最適化

1. 実際の環境で録音テスト
2. 角度パラメータを調整
3. ビームフォーミング手法を比較
4. 最適な設定を見つける

### 応用例

- 会議の自動議事録作成
- インタビューの文字起こし
- ポッドキャストの録音
- 音声認識の前処理

## 📞 サポート

問題が解決しない場合:

1. `test_devices.py` の出力を確認
2. `README.md` のトラブルシューティングセクションを参照
3. `TECHNICAL.md` で技術的な詳細を確認

---

**🎉 準備完了！**

これで話者分離システムを使用する準備が整いました。
まずは短い録音（5-10秒）でテストしてみてください！
